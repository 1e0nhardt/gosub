class_name Constant
extends Object

const DEFAULT_STATUS_MESSAGE = "Welcome to Gosub!"

# Prompt
const DEFAULT_PROMPT = "You are a helpful assistant"
const GOSUB_TRANSLATE = """请你扮演专业翻译员的角色。将各种语言的输入翻译为中文。翻译时追求自然流畅、贴近原文。

**注意事项**：
- 严格保留每行开头的时间格式，示例"[1.44->3.18]"。
- 翻译结果不要换行，不要省略标点符号。
- 不要输出任何与翻译结果无关的注释内容。

**翻译示例**：
输入：
[00:03:44.060->00:03:45.720]So let's open up the project,

输出：
[00:03:44.060->00:03:45.720]让我们打开项目，
"""

const GOSUB_PUNCTUATION = """这里有一段没有标点符号的英文文本，请帮我在恰当的单词后加上句号或逗号。除此以外，不要对原文做任何改动。另外，只输出原文对应结果，不要有任何多余的语句。"""

const ASS_TEMPLATE = """[Script Info]
; Script generated by Gosub
; https://github.com/1e0nhardt/Gosub
ScriptType: v4.00+
ScaledBorderAndShadow: Yes
PlayResX: 1920
PlayResY: 1080
WrapStyle: 0

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: EN,Resource Han Rounded CN Regular,40,&H00FFFFFF,&HF0000000,&H00000000,&H32000000,0,0,0,0,100,100,0,0,1,2,1,2,5,5,15,1
Style: ZH,Resource Han Rounded CN Regular,64,&H00FFFFFF,&HF00000FF,&H00000000,&H32000000,-1,0,0,0,100,100,0,0,1,2,1,2,10,10,10,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
"""

const DEFAULT_SETTINGS := {
    "video": {
        "download": {
            "proxy": {
                "type": TYPE_STRING,
                "data": "",
                "tooltip": "Proxy for downloading video."
            },
        },
        "render": {
            "bit_rate": {
                "type": TYPE_STRING,
                "data": "6M",
                "tooltip": "Bit rate for video encoding."
            },
        },
    },
    "transcribe": {
        "whisper.cpp": {
            "use_gpu": {
                "type": TYPE_BOOL,
                "data": false,
                "tooltip": "Whether to use GPU for transcribe."
            },
            "model_path": {
                "data": "",
                "hint_string": "path",
                "tooltip": "Path to the model file.",
                "type": TYPE_STRING
            },
            "smart_split": {
                "type": TYPE_BOOL,
                "data": false,
                "tooltip": "Whether to use smart split. i.e transcribe with -ml 1, split with full stop."
            },
            "smart_split_threshold": {
                "type": TYPE_FLOAT,
                "data": 5.0,
                "tooltip": "Long sentence threshold for smart split.",
                "hint_string": "4.0, 20.0, 0.1, s"
            },
            "smart_punctuation_threshold": {
                "type": TYPE_INT,
                "data": 200,
                "tooltip": "Long sentence threshold. If the sentence is longer than this value, will do punctuation automatically.",
                "hint_string": "100, 300, 1"
            },
            "sentence_min_words": {
                "type": TYPE_INT,
                "data": 3,
                "hint_string": "1, 20, 1",
                "tooltip": "a sentence should have at least this number of words.",
            },
            "sentence_max_gap_time": {
                "type": TYPE_FLOAT,
                "data": 3.0,
                "hint_string": "1.0, 10.0, 0.1, s",
                "tooltip": "If the gap between two sentences is longer than this value, the sentences will not be merged.",
            },
        }
    },
    "llm": {
        "common": {
            "clips_per_chat": {
                "type": TYPE_INT,
                "data": 16,
                "hint_string": "1, 100, 1",
                "tooltip": "Number of clips per chat.",
            },
            "prompt": {
                "chat": {
                    "type": TYPE_STRING,
                    "data": DEFAULT_PROMPT,
                    "hint_string": "multiline",
                    "tooltip": "Chat prompt for DeepSeek.",
                },
                "translate": {
                    "type": TYPE_STRING,
                    "data": GOSUB_TRANSLATE,
                    "hint_string": "multiline",
                    "tooltip": "Translate prompt for DeepSeek.",
                },
                "punctuation": {
                    "type": TYPE_STRING,
                    "data": GOSUB_PUNCTUATION,
                    "hint_string": "multiline",
                    "tooltip": "Punctuation prompt for DeepSeek.",
                },
            },
        },
        "deepseek": {
            "api_key": {
                "type": TYPE_STRING,
                "data": "",
                "tooltip": "API key for DeepSeek.",
            },
        },
    },
    "subtitle": {
        "ass": {
            "template": {
                "type": TYPE_STRING,
                "data": ASS_TEMPLATE,
                "hint_string": "multiline",
                "tooltip": "Template for ASS subtitle.",
            }
        },
    },
}
